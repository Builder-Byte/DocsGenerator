{
  "imports": [
    "file_explorer_cli.FileExplorer",
    "dependency_generator.DependencyGenerator",
    "openrouter_client.OpenRouterClient",
    "docs_creator.DocsCreator",
    "time",
    "shutil",
    "os",
    "uuid",
    "typing.Dict",
    "typing.Optional"
  ],
  "functions": [
    {
      "name": "summarize",
      "args": [
        "self"
      ],
      "returns": "None",
      "docstring": "Process all files in the project and generate documentation.\n\nFor each file:\n1. Extract code structure (imports, functions, classes, etc.)\n2. Perform cross-library analysis to link imports to source files\n3. Generate AI summary of the code\n4. Create Markdown and JSON documentation"
    },
    {
      "name": "_update_progress",
      "args": [
        "self",
        "current",
        "total",
        "current_file"
      ],
      "returns": "None",
      "docstring": "Update progress in the shared processing_status dict."
    },
    {
      "name": "__init__",
      "args": [
        "self",
        "folder_to_summarize",
        "output_folder",
        "session_id",
        "processing_status",
        "output_base_dir"
      ],
      "returns": "None",
      "docstring": "Initialize the Summarize class.\n\nArgs:\n    folder_to_summarize: Path to the folder containing source code\n    output_folder: Name of the output folder for generated docs\n    session_id: Optional unique session identifier for multi-user support\n    processing_status: Optional reference to shared status dict for progress updates\n    output_base_dir: Optional base directory for output files"
    }
  ],
  "classes": [
    {
      "name": "Summarize",
      "bases": [],
      "methods": [
        "summarize",
        "_update_progress",
        "__init__"
      ],
      "docstring": "Main class for summarizing code files in a project.\n\nReads all files from a folder, analyzes them using DependencyGenerator,\ngenerates AI summaries, and creates Markdown documentation."
    }
  ],
  "docstrings": {
    "module": null,
    "functions": {
      "summarize": "Process all files in the project and generate documentation.\n\nFor each file:\n1. Extract code structure (imports, functions, classes, etc.)\n2. Perform cross-library analysis to link imports to source files\n3. Generate AI summary of the code\n4. Create Markdown and JSON documentation",
      "_update_progress": "Update progress in the shared processing_status dict.",
      "__init__": "Initialize the Summarize class.\n\nArgs:\n    folder_to_summarize: Path to the folder containing source code\n    output_folder: Name of the output folder for generated docs\n    session_id: Optional unique session identifier for multi-user support\n    processing_status: Optional reference to shared status dict for progress updates\n    output_base_dir: Optional base directory for output files"
    },
    "classes": {
      "Summarize": "Main class for summarizing code files in a project.\n\nReads all files from a folder, analyzes them using DependencyGenerator,\ngenerates AI summaries, and creates Markdown documentation."
    }
  },
  "type_hints": {},
  "constants": [],
  "cross_library_functions": {
    "file_explorer_cli.FileExplorer": {
      "source_file": "file_explorer_cli.py",
      "functions": [
        "clear_file",
        "write_to_files",
        "write_to_json",
        "write_to_md",
        "readFiles",
        "print_folder_not_found",
        "getFiles",
        "detect_language",
        "get_manifest",
        "__init__"
      ],
      "classes": [
        "FileExplorer"
      ],
      "is_local": true
    },
    "dependency_generator.DependencyGenerator": {
      "source_file": "dependency_generator.py",
      "functions": [
        "_safe_parse",
        "generateGraph",
        "extract_imports",
        "extract_functions",
        "extract_classes",
        "extract_docstrings",
        "extract_type_hints",
        "extract_top_level_constants",
        "extract_todos",
        "analyze_cross_library_imports",
        "summarize_file",
        "__init__",
        "add_node"
      ],
      "classes": [
        "DependencyGenerator"
      ],
      "is_local": true
    },
    "openrouter_client.OpenRouterClient": {
      "source_file": "openrouter_client.py",
      "functions": [
        "summarize",
        "__init__"
      ],
      "classes": [
        "OpenRouterClient"
      ],
      "is_local": true
    },
    "docs_creator.DocsCreator": {
      "source_file": "docs_creator.py",
      "functions": [
        "__init__",
        "ensure_output_directory",
        "json_to_markdown"
      ],
      "classes": [
        "DocsCreator"
      ],
      "is_local": true
    },
    "time": {
      "source_file": null,
      "functions": [],
      "classes": [],
      "is_local": false,
      "note": "External library"
    },
    "shutil": {
      "source_file": null,
      "functions": [],
      "classes": [],
      "is_local": false,
      "note": "External library"
    },
    "os": {
      "source_file": null,
      "functions": [],
      "classes": [],
      "is_local": false,
      "note": "External library"
    },
    "uuid": {
      "source_file": null,
      "functions": [],
      "classes": [],
      "is_local": false,
      "note": "External library"
    },
    "typing.Dict": {
      "source_file": null,
      "functions": [],
      "classes": [],
      "is_local": false,
      "note": "External library"
    },
    "typing.Optional": {
      "source_file": null,
      "functions": [],
      "classes": [],
      "is_local": false,
      "note": "External library"
    }
  },
  "file_name": "summarize.py",
  "summary": "# Summarize Code Documentation\n\n## Table of Contents\n\n1. [Overview](#overview)\n2. [Architecture & Design](#architecture--design)\n3. [Public Interfaces](#public-interfaces)\n4. [Internal Logic](#internal-logic)\n5. [Configuration & Environment](#configuration--environment)\n6. [Usage Examples](#usage-examples)\n7. [Edge Cases & Constraints](#edge-cases--constraints)\n8. [Best Practices & Notes](#best-practices--notes)\n\n## Overview\n\nThe `Summarize` class is the main entry point for generating AI summaries and Markdown documentation for all code files in a specified project folder. It reads all files, analyzes their code structure, generates AI summaries using an OpenRouter client, and creates both Markdown and JSON documentation.\n\n## Architecture & Design\n\nThe `Summarize` class follows a simple yet effective architecture with the following key components:\n\n- **DependencyGenerator**: Responsible for analyzing code files and extracting relevant information such as imports, functions, classes, etc.\n- **OpenRouterClient**: Handles communication with the OpenRouter API to generate AI summaries of the code.\n- **DocsCreator**: Converts the generated analysis and summary data into Markdown and JSON formats.\n\nThe class uses a shared processing status dictionary (`processing_status`) to update progress across multiple instances or users. It also employs a unique session ID for multi-user support and output folder isolation.\n\n## Public Interfaces\n\n### `Summarize`\n\n**Signature**: `Summarize(folder_to_summarize: str, output_folder: str, session_id: Optional[str] = None, processing_status: Optional[Dict] = None, output_base_dir: Optional[str] = None)`\n\n**Parameters**:\n\n- `folder_to_summarize` (str): Path to the folder containing source code.\n- `output_folder` (str): Name of the output folder for generated docs.\n- `session_id` (Optional[str]): Optional unique session identifier for multi-user support.\n- `processing_status` (Optional[Dict]): Optional reference to shared status dict for progress updates.\n- `output_base_dir` (Optional[str]): Optional base directory for output files.\n\n**Returns**: None\n\n**Description**: Initializes the `Summarize` class and sets up the output folder structure.\n\n### `summarize`\n\n**Signature**: `summarize(self) -> None`\n\n**Parameters**: None\n\n**Returns**: None\n\n**Description**: Processes all files in the project and generates documentation. It reads all project files, analyzes their code structure, generates AI summaries, and creates Markdown and JSON documentation.\n\n### `_update_progress`\n\n**Signature**: `_update_progress(self, current: int, total: int, current_file: str) -> None`\n\n**Parameters**:\n\n- `current` (int): Current file being processed.\n- `total` (int): Total number of files in the project.\n- `current_file` (str): Path to the current file being processed.\n\n**Returns**: None\n\n**Description**: Updates progress in the shared processing status dictionary.\n\n## Internal Logic\n\nThe `summarize` method follows these critical workflows:\n\n1. Reads all project files using the `FileExplorer` class.\n2. Initializes the `OpenRouterClient`, `DependencyGenerator`, and `DocsCreator` instances.\n3. Loops through each file, updating progress and performing the following steps:\n   a. Generates code analysis using the `DependencyGenerator`.\n   b. Generates an AI summary using the `OpenRouterClient` with retry logic.\n   c. Creates safe filenames for output and generates documentation using the `DocsCreator`.\n\nThe `_update_progress` method updates the progress in the shared processing status dictionary, allowing for real-time progress tracking.\n\n## Configuration & Environment\n\n### Required environment variables\n\nNone\n\n### Configuration options\n\n- `folder_to_summarize`: Path to the folder containing source code.\n- `output_folder`: Name of the output folder for generated docs.\n- `session_id`: Optional unique session identifier for multi-user support.\n- `processing_status`: Optional reference to shared status dict for progress updates.\n- `output_base_dir`: Optional base directory for output files.\n\n### External services or resources used\n\n- OpenRouter API: Used to generate AI summaries of the code.\n\n## Usage Examples\n\n1. Initialize and run the `Summarize` class with a project folder and output folder:\n\n```python\nSummarize('mini_project', 'docs_output').summarize()\n```\n\n2. To use a custom session ID and output base directory:\n\n```python\nSummarize('mini_project', 'docs_output', session_id='my_session', output_base_dir='/path/to/output').summarize()\n```\n\n## Edge Cases & Constraints\n\n### Limitations\n\n- The `OpenRouterClient` might have rate limits or availability issues, which could affect the summary generation process.\n- Large projects with many files might experience slower processing times or memory constraints.\n\n### Assumptions\n\n- The project folder contains only Python files.\n- The `OpenRouterClient` is available and functioning correctly.\n\n### Performance considerations\n\n- Processing large projects might take considerable time, depending on the number of files and the OpenRouter API's response time.\n\n## Best Practices & Notes\n\n### Security considerations\n\n- Ensure that the OpenRouter API key is kept secure and not exposed in the code or configuration.\n- Be mindful of rate limits and API usage costs when using external services like OpenRouter.\n\n### Maintainability tips\n\n- Keep the `Summarize` class and its dependencies well-documented and organized for easy maintenance and updates.\n- Regularly review and update the `ignore_folders` list in the `FileExplorer` initialization to exclude unnecessary folders from processing.\n\n### Extension points\n\n- The `Summarize` class can be extended to support additional file types or analysis tools by modifying the `DependencyGenerator` and `DocsCreator` classes.\n- Custom progress tracking or reporting can be implemented by overriding or extending the `_update_progress` method."
}
